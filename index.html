<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2F3BA2">
  <title>DENON Remote</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  <link rel="manifest" href="/manifest.json">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>


<body>
<style>
.channel-list-item {
width: 250px;
}
</style>
</head>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header">
      <div class="mdl-layout__header-row">
        <span class="mdl-layout-title">Denon Remote</span>
        <div class="mdl-layout-spacer"></div>
        <button id="powerbtn" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">-
        </button>
      </div>
    </header>
    <main class="mdl-layout__content">
      <div class="page-content">
        <div class="content-grid mdl-grid">
          <div class="mdl-cell mdl-cell--4-col">
          <h4>Volume</h4>
            <p style="width:400px">
              <input id="volume" class="mdl-slider mdl-js-slider" type="range" min="0" max="20" value="0" , step="1" tabindex="0">
            </p>
            <h4>Listen</h4>
            <ul class="mdl-list channel-list-item">
              <li id="f1" class="channel-list-item mdl-list__item mdl-js-ripple-effect mdl-button mdl-js-button">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">radio</i>Raadio 2
                </span>
              </li>
              <li id="f2" class="channel-list-item mdl-list__item mdl-js-ripple-effect mdl-button mdl-js-button">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">radio</i>Kuku
              </span>
              </li>
              <li id="f3" class="channel-list-item mdl-list__item mdl-js-ripple-effect mdl-button mdl-js-button">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">radio</i>Mania
                </span>
              </li>
              <li id="f4" class="channel-list-item mdl-list__item mdl-js-ripple-effect mdl-button mdl-js-button">
                <span class="mdl-list__item-primary-content">
                <i class="material-icons mdl-list__item-icon">radio</i>Sky+
                </span>
              </li>
              <li id="f5" class="channel-list-item mdl-list__item mdl-js-ripple-effect mdl-button mdl-js-button">
                <span class="mdl-list__item-primary-content">
                <i class="material-icons mdl-list__item-icon">radio</i>Adore Jazz
                </span>
              </li>
              <li id="f9" class="channel-list-item mdl-list__item mdl-js-ripple-effect mdl-button mdl-js-button">
                <span class="mdl-list__item-primary-content">
                <i class="material-icons mdl-list__item-icon">radio</i>High Voltage
                </span>
              </li>
              <li id="f8" class="channel-list-item mdl-list__item mdl-js-ripple-effect mdl-button mdl-js-button">
                <span class="mdl-list__item-primary-content">
                <i class="material-icons mdl-list__item-icon">radio</i>Vikerraadio
                </span>
              </li>
              <li id="inputaux" class="channel-list-item mdl-list__item mdl-js-ripple-effect mdl-button mdl-js-button">
                <span class="mdl-list__item-primary-content">
                <i class="material-icons mdl-list__item-icon">cast</i>Chromecast
                </span>
              </li>
            </ul>
            <h4 id="alarmstate">Alarm</h4>
            <p>
              <button id="alarmon" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">Turn alarm ON</button>
              <button id="alarmoff" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">Turn alarm OFF</button>
            </p>
          </div>
        </div>
      </div>
    </main>
  </div>
</body>
<script type="text/javascript">

  var powerOn = false;

  $(document).ready(function() {
    refreshState();
    setInterval(function(){
      refreshState();
    }, 3000);

    $("#volume").on('input', function() {
      v = $("#volume").val();
      $.getJSON("/api/volume/" + v, function(data) {});
    });

    $('#alarmon').click(function() {
      $.getJSON("/api/alarm/on", function(data) {
        refreshState()
      });
    });

    $('#alarmoff').click(function() {
      $.getJSON("/api/alarm/off", function(data) {
        refreshState()
      });
    });

    $('#powerbtn').click(function() {
      if (powerOn)
        $.getJSON("/api/power/off", function(data) {});
      else
        $.getJSON("/api/power/on", function(data) {});
    });


    $('#f1').click(function() {
      $.getJSON("/api/favourite/1", function(data) {});
    });

    $('#f2').click(function() {
      $.getJSON("/api/favourite/2", function(data) {});
    });

    $('#f3').click(function() {
      $.getJSON("/api/favourite/3", function(data) {});
    });

    $('#f4').click(function() {
      $.getJSON("/api/favourite/4", function(data) {});
    });

    $('#f5').click(function() {
      $.getJSON("/api/favourite/5", function(data) {});
    });

    $('#f8').click(function() {
      $.getJSON("/api/favourite/8", function(data) {});
    });

    $('#f9').click(function() {
      $.getJSON("/api/favourite/9", function(data) {});
    });

    $('#inputtuner').click(function() {
      $.getJSON("/api/input/tuner", function(data) {});
    });

    $('#inputaux').click(function() {
      $.getJSON("/api/input/aux", function(data) {});
    });
  });

  function refreshState() {
    $.getJSON("/api/power", function(data) {
      if (data.power == undefined || !data.power.match("PWON")) {
        $("#powerbtn").html("Power ON");
        powerOn = false;

      } else {
        $("#powerbtn").html("Power OFF");
        powerOn = true;

        $.getJSON("/api/alarm", function(data) {
          if (data.alarm.daily) {
            $("#alarmstate").text("Alarm ON");
          } else {
            $("#alarmstate").text("Alarm OFF");
          }
        });
        $.getJSON("/api/volume", function(data) {
          $("#volume").get(0).MaterialSlider.change(data.volume);
        });
      }
    });
  }
</script>

</html>
